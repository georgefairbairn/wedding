---
import NavLink from "../nav-link/NavLink.astro";

const { noHeader } = Astro.props;
---

<div
  id="overlay"
  class="pointer-events-none fixed inset-0 z-10 bg-gray-800/75 opacity-0 transition-opacity"
>
</div>

<div class="relative flex w-full justify-center">
  <button
    id="hamburgerBtn"
    class="bg-custom-pink fixed top-4 left-6 z-10 mt-8 grid w-10 grid-cols-1 rounded-sm p-2 md:top-8 md:left-16 cursor-pointer"
    type="button"
  >
    <div class="mb-1 h-1 w-full rounded-sm bg-white"></div>
    <div class="mb-1 h-1 w-full rounded-sm bg-white"></div>
    <div class="h-1 w-full rounded-sm bg-white"></div>
  </button>
  {
    !noHeader && (
      <NavLink href="/">
        <div class="mt-10 flex flex-col items-center font-normal">
          <div class="text-custom-green font-balmy text-7xl tracking-normal">
            George
          </div>
          <div class="-m-2.5 flex items-start justify-end">
            <span class="font-white font-sacramento mr-4 text-7xl text-white">
              &
            </span>
            <span class="text-custom-green font-balmy text-7xl tracking-normal">
              Izzy
            </span>
          </div>
        </div>
      </NavLink>
    )
  }
</div>

<nav
  id="mobileNav"
  class="bg-custom-green fixed top-0 left-0 z-20 h-full w-72 -translate-x-72 overflow-y-auto py-16 transition-all duration-300"
>
  <NavLink href="/" className="mt-12">home</NavLink>
  <NavLink href="/rsvp" className="mt-12">rsvp</NavLink>
  <NavLink href="/travel-and-accommodation" className="mt-12" forceReload>
    travel and accommodation
  </NavLink>
  <NavLink href="/schedule" className="mt-12">schedule</NavLink>
  <NavLink href="/the-day-after" className="mt-12" forceReload>
    the day after
  </NavLink>
  <NavLink href="/gifts" className="mt-12" forceReload>gifts</NavLink>
  <NavLink href="/faq" className="mt-12">faq</NavLink>
  <button
    id="closeBtn"
    class="absolute top-3 right-5 text-4xl text-white cursor-pointer"
    type="button">Ã—</button
  >
</nav>

<script>
  document.addEventListener("astro:page-load", () => {
    const mobileNav = document.getElementById("mobileNav");
    const overlay = document.getElementById("overlay");
    const closeBtn = document.getElementById("closeBtn");
    const hamburgerBtn = document.getElementById("hamburgerBtn");

    const toggleClasses = () => {
      mobileNav?.classList.toggle("-translate-x-72");
      overlay?.classList.toggle("opacity-0");
      overlay?.classList.toggle("pointer-events-none");
    };

    hamburgerBtn?.addEventListener("click", toggleClasses);
    closeBtn?.addEventListener("click", toggleClasses);
    overlay?.addEventListener("click", toggleClasses);
  });
</script>
